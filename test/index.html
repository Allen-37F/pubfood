<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
        <title>Pubfood Tests</title>
    </head>
    <body>

        <div id="mocha"></div>

        <script src="../node_modules/mocha/mocha.js"></script>
        <script src="../node_modules/chai/chai.js"></script>
        <!-- jQuery for testing purposes only -->
        <script src="../test/assets/vendor/jquery.js"></script>

        <!-- For testing sync load pubfood -->
        <script src="../dist/pubfood.js"></script>

        <script type="text/javascript">
         mocha.ui('bdd');
        </script>

        <!-- Publisher Ad Server - Google Gpt -->
        <!-- ToDo: sync load this for tests? -->
        <script type='text/javascript'>
         var googletag = googletag || {};
         googletag.cmd = googletag.cmd || [];
         (function() {
             var gads = document.createElement('script');
             gads.async = true;
             gads.type = 'text/javascript';
             var useSSL = 'https:' == document.location.protocol;
             gads.src = (useSSL ? 'https:' : 'http:') +
                        '//www.googletagservices.com/tag/js/gpt.js';
             var node = document.getElementsByTagName('script')[0];
             node.parentNode.insertBefore(gads, node);
         })();
        </script>


    <!-- Yieldbot.com Intent Tag LOADING -->
    <script type="text/javascript" src="http://cdn.yldbt.com/js/yieldbot.intent.js"></script>

    <!-- Yieldbot.com Intent Tag ACTIVATION -->
    <script type="text/javascript">

    </script>
    <!-- END Yieldbot.com Intent Tag -->


        <script type="text/javascript">

         // ToDo: Separate concerns and load tests via script elements
         var assert = chai.assert;
         var expect = chai.expect;

         describe('Pubfood - Tests', function () {

             afterEach(function () {
                 console.log('\t\tmocha.afterEach');
             });

             describe('Test Dependency Load', function testFalse() {
                 it('should have googletag', function () {
                     var googletag = window.googletag;
                     assert.isDefined(googletag.pubads, 'googletag is undefined');
                 });
             });

             describe('BidProvider', function testFalse() {
                 it('yieldbot tag should load', function () {
                     var yieldbot = window.yieldbot;
                     assert.isDefined(yieldbot, 'yieldbot is undefined');
                 });
             });
         });

        </script>

        <script>
         onload = function() {
             if (window.debugger) {
                 eval('debugger;');
             }
             mocha.run();
         };
        </script>

    </body>
</html>
